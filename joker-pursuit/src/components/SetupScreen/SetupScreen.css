.setup-screen {
  position: fixed;
  inset: 0;
  padding: clamp(14px, 3vw, 28px);
  display: grid;
  place-items: center;
  overflow: auto;
  background:
    radial-gradient(120% 120% at 0% 0%, #f5e5ce 0%, rgba(245, 229, 206, 0) 62%),
    radial-gradient(95% 120% at 100% 8%, #d3e5f0 0%, rgba(211, 229, 240, 0) 58%),
    linear-gradient(170deg, #eff5fb 0%, #e8f0f8 46%, #f4efe6 100%);
  color: var(--ink-strong);
}

.setup-screen .floating-element {
  position: fixed;
  pointer-events: none;
  --float-rotation: 0deg;
  --float-scale: 1;
  --float-drift-x: 50px;
  --float-drift-y: -36px;
  --float-duration: 30s;
  --float-delay: 0s;
  transform: translate3d(0, 0, 0) rotate(var(--float-rotation)) scale(var(--float-scale));
  animation: setup-float var(--float-duration) ease-in-out var(--float-delay) infinite alternate;
  opacity: 0.2;
  mix-blend-mode: multiply;
  z-index: 0;
}

.setup-screen .floating-element.card {
  width: 56px;
  height: 82px;
  border-radius: 10px;
  border: 1px solid rgba(66, 87, 112, 0.15);
  background: linear-gradient(150deg, rgba(255, 255, 255, 0.94), rgba(232, 242, 249, 0.85));
  box-shadow: 0 8px 20px rgba(24, 37, 54, 0.2);
}

.setup-screen .floating-element.peg {
  width: 23px;
  height: 23px;
  border-radius: 50%;
  box-shadow: 0 5px 12px rgba(18, 28, 40, 0.24);
}

.setup-content {
  position: relative;
  z-index: 1;
  width: min(1080px, 100%);
  max-height: min(92vh, 980px);
  overflow: auto;
  padding: clamp(20px, 3vw, 34px);
  border-radius: 28px;
  border: 1px solid var(--surface-border);
  background: linear-gradient(155deg, rgba(255, 255, 255, 0.9), rgba(241, 248, 253, 0.82));
  box-shadow: var(--shadow-medium);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}

.setup-title {
  margin: 0;
  text-align: center;
  font-family: var(--font-display);
  font-size: clamp(2rem, 4.8vw, 3.15rem);
  line-height: 1.05;
  letter-spacing: -0.02em;
  color: #1a3554;
}

.vintage-line {
  width: min(380px, 82%);
  height: 2px;
  margin: 1.2rem auto 1.8rem;
  background: linear-gradient(90deg, transparent 0%, rgba(15, 107, 116, 0.56) 40%, rgba(199, 103, 58, 0.7) 62%, transparent 100%);
}

.setup-section {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 14px 16px;
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(164, 185, 209, 0.5);
  box-shadow: var(--shadow-soft);
}

.setup-section label {
  font-size: 1.03rem;
  font-weight: 700;
  color: #29435f;
}

.button-group {
  display: flex;
  gap: 10px;
}

.control-button {
  inline-size: 52px;
  block-size: 52px;
  min-inline-size: 52px;
  min-block-size: 52px;
  border: 0;
  border-radius: 14px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex: 0 0 52px;
  font-size: 1.6rem;
  font-weight: 700;
  color: #fff;
  background: linear-gradient(155deg, #2a7384 0%, #195a67 100%);
  box-shadow: 0 10px 18px rgba(16, 59, 74, 0.28);
  transition: transform 150ms ease, filter 150ms ease, opacity 150ms ease;
}

.control-button:hover:not(:disabled) {
  transform: translateY(-1px);
  filter: brightness(1.03);
}

.control-button:active:not(:disabled) {
  transform: translateY(0);
}

.control-button:disabled {
  opacity: 0.46;
  cursor: not-allowed;
}

.players-section {
  margin-top: 14px;
  display: grid;
  gap: 12px;
}

.player-row {
  display: grid;
  grid-template-columns: minmax(220px, 1fr) auto;
  gap: 14px;
  align-items: center;
  padding: 14px;
  border-radius: 16px;
  border: 1px solid rgba(164, 185, 209, 0.52);
  background: rgba(255, 255, 255, 0.74);
  box-shadow: 0 8px 18px rgba(30, 46, 65, 0.1);
}

.player-input {
  min-width: 0;
}

.player-input input {
  width: 100%;
  min-height: 48px;
  border: 1px solid rgba(137, 160, 189, 0.58);
  border-radius: 12px;
  background: rgba(253, 255, 255, 0.9);
  padding: 10px 13px;
  font-size: 1rem;
  font-weight: 600;
  color: #27364a;
}

.player-input input::placeholder {
  color: rgba(84, 97, 118, 0.82);
}

.player-options {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  justify-content: flex-end;
}

.team-select,
.color-select {
  display: flex;
  align-items: center;
  gap: 8px;
}

.team-select label,
.color-select label {
  font-size: 0.92rem;
  font-weight: 700;
  color: #3d4f66;
}

.team-select select,
.color-select select {
  min-height: 44px;
  min-width: 132px;
  padding: 8px 30px 8px 10px;
  border: 1px solid rgba(139, 162, 192, 0.6);
  border-radius: 10px;
  color: #fff;
  font-weight: 700;
  letter-spacing: 0.01em;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.18), 0 6px 12px rgba(31, 47, 66, 0.16);
}

.color-select {
  position: relative;
}

.color-select::after {
  content: 'â–¾';
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: rgba(255, 255, 255, 0.95);
  font-size: 0.95rem;
  pointer-events: none;
}

.color-select select option,
.team-select select option {
  color: #fff;
  background: #3c556f;
}

.unavailable-option {
  min-height: 44px;
  padding: 10px 12px;
  display: inline-flex;
  align-items: center;
  border-radius: 10px;
  background: rgba(117, 130, 148, 0.85);
  color: #f4f7fb;
  font-size: 0.92rem;
  font-weight: 700;
}

.setup-actions {
  position: sticky;
  bottom: 0;
  margin-top: 18px;
  padding: 12px;
  display: grid;
  grid-template-columns: minmax(120px, 220px) 1fr minmax(120px, 220px);
  align-items: center;
  gap: 12px;
  border-top: 1px solid rgba(156, 179, 206, 0.45);
  border-radius: 14px;
  background: linear-gradient(180deg, rgba(249, 252, 255, 0.62), rgba(242, 249, 255, 0.94));
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

.setup-screen .skeuomorphic-button {
  min-height: 50px;
  border: 1px solid transparent;
  border-radius: 12px;
  color: #fff;
  font-size: 0.98rem;
  font-weight: 700;
  letter-spacing: 0.01em;
  position: relative;
  overflow: hidden;
  transition: transform 150ms ease, filter 150ms ease, opacity 150ms ease;
}

.setup-screen .skeuomorphic-button:hover:not(:disabled) {
  transform: translateY(-1px);
  filter: brightness(1.03);
}

.setup-screen .skeuomorphic-button:active:not(:disabled) {
  transform: translateY(0);
}

.setup-screen .skeuomorphic-button:disabled {
  opacity: 0.52;
  cursor: not-allowed;
}

.setup-screen .primary-button {
  background: linear-gradient(160deg, var(--brand) 0%, var(--brand-strong) 100%);
  box-shadow: 0 10px 16px rgba(16, 60, 76, 0.25);
}

.setup-screen .secondary-button {
  background: linear-gradient(160deg, #737f91 0%, #556173 100%);
  box-shadow: 0 10px 16px rgba(29, 38, 53, 0.2);
}

.setup-screen .button-text {
  position: relative;
  z-index: 2;
}

.setup-screen .button-shine {
  position: absolute;
  inset: -130% 0 0 -32%;
  width: 50%;
  background: linear-gradient(95deg, transparent 0%, rgba(255, 255, 255, 0.34) 52%, transparent 100%);
  transform: translateX(-140%) rotate(11deg);
  transition: transform 480ms ease;
}

.setup-screen .skeuomorphic-button:hover .button-shine,
.setup-screen .skeuomorphic-button:focus-visible .button-shine {
  transform: translateX(320%) rotate(11deg);
}

.team-mode-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.toggle-label {
  font-size: 0.9rem;
  font-weight: 700;
  color: #3d4f66;
}

.toggle-switch {
  width: 64px;
  height: 34px;
  padding: 3px;
  border-radius: 999px;
  background: rgba(141, 157, 178, 0.48);
  border: 1px solid rgba(106, 126, 149, 0.35);
  cursor: pointer;
}

.toggle-slider {
  width: 100%;
  height: 100%;
  border-radius: inherit;
  position: relative;
  background: rgba(84, 97, 118, 0.42);
  transition: background-color 170ms ease;
}

.toggle-slider.active {
  background: linear-gradient(160deg, var(--success) 0%, #257855 100%);
}

.toggle-knob {
  position: absolute;
  top: 2px;
  left: 2px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: #fff;
  box-shadow: 0 3px 8px rgba(29, 45, 63, 0.28);
  transition: left 170ms ease;
}

.toggle-slider.active .toggle-knob {
  left: calc(100% - 26px);
}

@keyframes setup-float {
  from {
    transform:
      translate3d(calc(var(--float-drift-x) * -1), calc(var(--float-drift-y) * -1), 0)
      rotate(calc(var(--float-rotation) - 8deg))
      scale(var(--float-scale));
  }
  to {
    transform:
      translate3d(var(--float-drift-x), var(--float-drift-y), 0)
      rotate(calc(var(--float-rotation) + 8deg))
      scale(var(--float-scale));
  }
}

@media (max-width: 1024px) {
  .player-row {
    grid-template-columns: 1fr;
    align-items: stretch;
  }

  .player-options {
    justify-content: flex-start;
  }

  .setup-actions {
    grid-template-columns: 1fr;
  }

  .team-mode-toggle {
    order: -1;
    justify-content: flex-start;
  }
}

@media (max-width: 640px) {
  .setup-screen {
    padding: 10px;
  }

  .setup-content {
    border-radius: 18px;
    max-height: calc(100vh - 20px);
    padding: 14px;
  }

  .setup-section {
    flex-direction: column;
    align-items: flex-start;
  }

  .button-group {
    width: 100%;
    justify-content: flex-start;
  }

  .player-options {
    flex-direction: column;
    align-items: stretch;
  }

  .team-select,
  .color-select {
    width: 100%;
    justify-content: space-between;
  }

  .team-select select,
  .color-select select,
  .unavailable-option {
    width: 100%;
  }
}
